Q1: architecture of prometheous

Q2: How does the push-gateway works and in what scenario is it useful?
The Pushgateway is used when we have short-lived jobs â€” like scripts or cron jobs â€” that start, finish, and exit quickly.
Since Prometheus scrapes metrics at fixed intervals, it may miss these short-lived jobs, because theyâ€™re gone before Prometheus checks.
So instead, these jobs push their metrics to the Pushgateway right before they finish.
Then, Prometheus scrapes the Pushgateway every minute (or whatever the interval is), and collects those metrics.


Q3: What is promql give me some example query?
PromQL is the query language used to interact with the Prometheus HTTP server. It allows you to retrieve, filter, and aggregate time-series data.

With PromQL, you can:
ğŸ” Query metrics based on labels (e.g. method="GET")
ğŸ“† Define a time range for your data (like last 5 minutes or 1 hour)
ğŸ“Š Aggregate data (e.g. sum, avg, rate)
ğŸ“ˆ Visualize results as graphs (e.g. in Prometheus UI or Grafana)


Q4: What is exporter? common exporter?
exporter is a small program that collects matrix from a system or application and makes them available in a format that prometheus can understand.
we can have n number of exporter but each exporter will be responsible for specific system,service,node 
like for node matrix = node exporter
like for k8s matrix =  kube-state-matrix >> give info about pod health,pod restart,memory,cpu,how many configmap is created,how many secrets,deployment status
similarly we can have so many exporter for specific matrix,we can also have custom matrix
##point  prometheus cannot directly scrap the matrix from system but it rely on exporter (middleman) which collects matrix and expose them via http endpoint(usually /matrix)
and finally prometheus scrap matrix from here


Q5: What is grafana and data source?
Grafana is an open-source data visualization and dashboard tool.
it allow you to Create dashboards with charts, graphs, and alerts,
Visualize metrics from tools like Prometheus.
It's mainly used in monitoring setups to turn raw metrics into readable visuals.

A Data Source is where Grafana gets the data from.Grafana itself doesnâ€™t store any dataâ€” it connects to a Data Source (like Prometheus),fetches the data, and then shows it in
dashboards


Q6: What is service discovery? How does it work?
Service Discovery besically help Prometheus to automatically find the services, pods, or targets they need to monitor â€” without manually listing each one.
Instead of hardcoding IPs or port or modifying prometheous.yaml, Prometheus uses service discovery to dynamically detect and scrape metrics from new services as they come and go.
so lets say developer instrument the code and expose metrics at /metrics endpoint
now as part of service discovery first we will deploy the app with correct labels

apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
  labels:
    app: my-app             # ğŸ‘ˆ This label identifies the app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-app           
  template:
    metadata:
      labels:
        app: my-app         
    spec:
      containers:
        - name: my-app
          image: my-app:latest
          ports:
            - name: http    # ğŸ‘ˆ This name will be referenced in the Service and ServiceMonitor
              containerPort: 8080


apiVersion: v1
kind: Service
metadata:
  name: my-app-service
  labels:
    app: my-app              # ğŸ‘ˆ This label must match ServiceMonitor's selector.matchLabels
spec:
  selector:
    app: my-app              # ğŸ‘ˆ This must match Pod labels from the Deployment
  ports:
    - name: http             # ğŸ‘ˆ This port name must match the one in ServiceMonitor 'port'
      port: 8080
      targetPort: http       # ğŸ‘ˆ Uses the containerPort name from Deployment

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: my-app-servicemonitor
  namespace: monitoring       # ğŸ‘ˆ Where Prometheus and Operator are deployed
  labels:
    release: prometheus       # âœ… REQUIRED: Matches Prometheus CR's selector
spec:
  selector:
    matchLabels:
      app: my-app             # ğŸ‘ˆ Matches the label on the Service
  namespaceSelector:
    matchNames:
      - default               # ğŸ‘ˆ Namespace where your app and Service are deployed
  endpoints:
    - port: http              # ğŸ‘ˆ Must match the port name in the Service
      path: /metrics          # ğŸ‘ˆ Path exposed by your app
      interval: 30s








Q7: what is custom metrics how do you implememnt it?

Q8: what is lebal & relable in prometheous.yaml

Q9: what is prometheous.yaml config file

Q10: How would you create dashboard?
from dashboard UI i will click create-dashboard ____add a new panel__select prometheous as data source__write promql query__& customize visualization
#panels is nothing but a visual componant like graphs,tables and alerts.

Q11: what are the common metrics you have scrap?

EKS:                                                                   Jenkins
kube_pod_container_status_running                                      jenkins_job_last_build_duration_seconds                                                                     
kube_deployment_status_replicas                                        jenkins_job_last_build_result
container_cpu_usage_seconds_total                                      jenkins_executor_count
                                                                       node_cpu_seconds_total
                                                                       node_memory_MemTotal_bytes       totalmemory
                                                                       node_memory_MemAvailable_bytes    available

Q12: how would you implement alert-manager

Q13: difference between counter, guage and histograms in prometheous?
counter: a metrics that only increases (eg number of https requests)
guage: a metrics that can increase or decrease (eg memory ussage)

Q14: How do you monitor custom application with prometheous?
first instrument code with client librarary (Go, Python, Java)
expose a /metrics endpoint
configure prometheous to scrap the endpoint

Q15: How do you scrap multiple targets in prometheous?
we have to define multiple jobs in promethous.yaml
or you can have service discovery.

Q16: diffrence between serviceMonitor & podMonitor?
ğŸ› ï¸ ServiceMonitor: Used to tell Prometheus to scrape metrics from Kubernetes Services.    eg: node exporter(deamonset) or custom metrics
ğŸ“¦ PodMonitor: Used to scrape metrics directly from Pods, especially useful if there's no Service in front of them.     eg: sidecar container or short-lived pods

